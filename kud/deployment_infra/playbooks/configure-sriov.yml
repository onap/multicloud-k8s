---
# SPDX-license-identifier: Apache-2.0
##############################################################################
# Copyright (c) 2018
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Apache License, Version 2.0
# which accompanies this distribution, and is available at
# http://www.apache.org/licenses/LICENSE-2.0
##############################################################################

- import_playbook: preconfigure-sriov.yml
- import_playbook: configure-multus.yml

- hosts: localhost
  tasks:
    - name: Apply SRIOV CNI
      shell: "/usr/local/bin/kubectl apply -f {{ playbook_dir
}}/../images/sriov-cni.yaml"
    - name: Apply SRIOV DaemonSet
      shell: "/usr/local/bin/kubectl apply -f {{ playbook_dir
}}/../images/sriov-daemonset.yaml"
    - name: Apply SRIOV Network Attachment definition
      shell: "/usr/local/bin/kubectl apply -f {{ playbook_dir }}/sriov-nad.yml"
    - name: Apply SRIOV sample Pod
      shell: "/usr/local/bin/kubectl apply -f {{ playbook_dir }}/sriov-eno2-pod.yml"
